# 贪食蛇游戏

## 版本信息
**当前版本：v2.2.0**  
**发布日期：2024年12月19日**

一个现代风格的网页版贪食蛇游戏，支持三关卡系统、多种食物类型、障碍物挑战和完美的移动端适配。

## 功能特性

### 🎮 三关卡系统
- **关卡1 - 纯净模式**：回归经典，专注基础操作，无障碍物干扰
- **关卡2 - 进阶挑战**：引入障碍物和多种食物类型
- **关卡3 - 地狱模式**：极限挑战，高密度障碍物布局

### 🍎 多种食物类型
- **普通食物**：+10分，基础食物
- **大食物**：+20分，双倍分数奖励
- **减速食物**：+10分，暂时降低游戏速度

### 🏆 单关最高分系统
- 每个关卡独立记录最高分
- 关卡切换时自动加载对应最高分
- 实时更新显示，挑战个人记录

### 🎯 游戏核心功能
- 20×20 网格，平滑移动与现代UI样式
- 控制：方向键或 `W/A/S/D`，支持移动端虚拟按键
- 计分与计时：顶部显示分数与剩余时间（默认 60 秒）
- 暂停/继续：按 `P` 键随时暂停/继续
- 边界模式：撞墙死亡 / 穿墙模式切换
- 分数加速：每获得 +50 分，游戏速度提升一次
- 颜色变化：每获得 +100 分自动切换蛇的颜色主题
- 庆祝烟花：坚持到计时结束触发烟花动画

### 📱 移动端优化
- 完美适配iPhone 16及各种移动设备
- 响应式设计，支持不同屏幕尺寸
- 虚拟方向键，触屏操作友好
- 一屏显示，无需滚动

## 基本玩法
- 点击【开始游戏】或按键后使用方向键/WASD控制蛇移动。
- 吃到食物加分并变长，食物会随机刷新在非蛇身体位置。
- 在 `撞墙死亡` 模式下，撞到边界或自己身体会结束游戏。
- 在 `穿墙` 模式下，越界会从另一侧出现，但撞到自己仍会结束。

## 操作指南
- 键盘：
  - `↑ / W` 上
  - `↓ / S` 下
  - `← / A` 左
  - `→ / D` 右
  - `P` 暂停/继续
- 页面按钮：
  - 顶部【边界模式】选择框：切换越界行为
  - 【开始游戏】、【重新开始】
  - 暂停菜单的【继续】【重开】【操作说明】
  - 移动端方向按钮：屏幕上的 `↑ ← ↓ →` 四个按钮可直接控制方向

## 运行与预览
- 环境：本项目为纯静态页面，无需构建工具。
- 本地预览：在项目根目录运行：

  ```bash
  python3 -m http.server 8081
  ```

  在浏览器打开 `http://localhost:8081/`。

## 项目结构
```
snakes2/
├── index.html      # 主页面结构，关卡选择界面
├── style.css       # 桌面端样式，现代UI设计
├── mobile.css      # 移动端专用样式，响应式适配
├── script.js       # 游戏核心逻辑，三关卡系统
├── config.json     # 游戏配置文件，关卡数据
├── fireworks.js    # 烟花动画效果
└── README.md       # 项目说明文档
```

## 常见问题
- 端口占用：若 `8081` 被占用，换用 `8082` 或其他空闲端口。
- 浏览器控制台出现 `404 /@vite/client`：与本项目无关，属于浏览器自动请求的非项目资源，可忽略。
- 暂停后计时器是否继续：暂停时计时器与游戏循环均停止；继续后恢复。

## 自定义
- 可调整 `config.json` 中的关卡配置：
  - 障碍物位置和数量
  - 传送门位置配置
  - 食物权重分布
- 可调整 `script.js` 中的游戏参数：
  - 初始速度 `gameSpeed`（默认 150ms）
  - 加速步长 `speedStep`（默认 15ms）
  - 最低速度 `minSpeed`（默认 70ms）
  - 网格大小 `gridSize`（默认 20）

## 更新日志

### v2.2.0 (2024年12月19日 - 今日更新)
#### 🎯 游戏机制优化
- **移除里程碑庆祝系统**：简化游戏界面，专注核心玩法
  - 移除里程碑数组、检查和庆祝相关方法
  - 清理HTML中的里程碑显示元素
  - 移除CSS中的里程碑通知样式
- **关卡完成庆祝改进**：关卡完成时游戏自动暂停
  - 修改庆祝方法，完成关卡时暂停游戏
  - 优化庆祝按钮交互，点击后继续而非重新开始
- **传送门系统完全移除**：回归纯粹贪食蛇体验
  - 从所有关卡配置中移除传送门
  - 清理JavaScript中的传送门相关代码
  - 移除CSS中的传送门样式和动画效果
  - 保留障碍物系统，维持关卡挑战性

#### 🏆 计分系统重构
- **实时最高分更新**：修复最高分显示延迟问题
  - 在分数变化时立即更新最高分显示
  - 确保最高分实时反映当前游戏状态
- **单关最高分系统**：每个关卡独立记录最高分
  - 修改存储机制，使用关卡特定的localStorage键
  - 更新loadHighScore和saveHighScore方法
  - 关卡切换时自动加载对应关卡的最高分
  - 每关都有独立的最高分挑战目标

#### 🔧 技术改进
- **代码结构优化**：移除冗余代码，提升维护性
- **配置文件精简**：config.json移除传送门配置
- **性能提升**：减少不必要的计算和渲染

#### ✅ 测试验证
- 所有功能修改已通过完整测试
- 游戏服务器运行稳定 (http://localhost:8080)
- 移动端和桌面端兼容性确认

### v2.1.0 (2024年12月)
#### 🎮 新增功能
- **三关卡系统**：纯净模式、进阶挑战、地狱模式
- **多种食物类型**：普通食物、大食物、减速食物
- **传送门机制**：瞬间传送，增加策略性
- **配置文件系统**：`config.json` 统一管理关卡数据

#### 📱 移动端优化
- **完美适配iPhone 16**：393px视口宽度专项优化
- **响应式设计**：支持各种移动设备屏幕
- **移动端样式文件**：独立的 `mobile.css` 文件
- **一屏显示**：游戏界面完全适配单屏显示
- **触控优化**：虚拟方向键操作体验优化

#### 🎯 游戏体验改进
- **新计分系统**：每个食物10分，更有成就感
- **平衡性调整**：提速条件调整为每50分，颜色切换每100分
- **界面优化**：现代化UI设计，更好的视觉效果
- **性能优化**：代码结构优化，运行更流畅

#### 🐛 问题修复
- 修复游戏网格在移动端的居中问题
- 优化各种屏幕尺寸下的显示效果
- 改进触控响应和操作精度

### v1.0.0 (初始版本)
- 基础贪食蛇游戏功能
- 暂停/继续机制
- 边界模式切换
- 计时器和计分系统
- 烟花庆祝动画